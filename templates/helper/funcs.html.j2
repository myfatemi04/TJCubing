<!-- TODO: automate bulleted lists because those are my favorite appparently. -->

{% macro bullet_list(users, func) %}
    <ul>
      {%- for user in users %}
          <li> {{ func(user) }} </li>
      {%- endfor %}
    </ul>
{% endmacro %}

{% macro test(hi) %}
  <p> {{ hi }} </p>
{% endmacro %}

{% macro link(url, text) %}
  <a href="{{ url }}">{{ text }}</a>
{% endmacro %}

<!-- Actual functions -->
{% macro active(path, furl_for) %}
  {{ 'active' if request.path.split('/')[-1] == furl_for(path).split('/')[-1].strip() else '' }}
{% endmacro %}

{% macro disable(name, vote_active, disabled=['run for office', 'vote!']) %}
  {{ 'disabled' if not vote_active and name in disabled else '' }}
{% endmacro %}

{% macro pactive(children, furl_for) %}
 {% for path, name in children if active(path, furl_for).strip() == 'active' %}
  active
 {% endfor %}
{% endmacro %}

{% macro dropdown(self, children, dividers, furl_for, vote_active=False, extra='', img='') %}
  <li class="nav-item dropdown">
    <!-- See if child is active -->
    <a class="nav-link dropdown-toggle {{ pactive(children, furl_for) }}" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ img }}
      {{ self[1:]|capitalize }}
    </a>
    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
      {% for path, name in children %}
        <!-- Hack but whatever, next webdev can make this entire nav system better -->
        {% if name in dividers %} <div class="dropdown-divider"></div> {% endif %}
        <a class="dropdown-item {{ disable(name, vote_active) }} {{ active(path, furl_for) }}" href="{{ furl_for(path) }}">{{ name|capitalize }}</a>
      {% endfor %}
      {{ extra }}
    </div>
  </li>
{% endmacro %}

{% macro button(name="submit", text="Submit", classes="btn btn-primary", value="") %}
  <button class="btn {{ classes }}" name="{{ name }}" id="{{ name }}" value="{{ value }}" type="submit">{{ text }}</button>
{% endmacro %}

{% macro rbr() %}
  <span class="d-block d-sm-none"></span>
{% endmacro %}

{% macro split_lines(s) %}
  {% for line in s.split("|") %}
    {{ line + ("." if not loop.last else "") }}{{ rbr() }}
  {% endfor %}
{% endmacro %}

{% macro make_card(width, title, subtitle, body, extra) %}
  <div class="card mt-5" style="width: {{ width }}rem;">
    <div class="card-body">
      <h5 class="card-title">{{ title }}</h5>
      <h6 class="card-subtitle mb-2 text-muted">{{ subtitle }}</h6>
      <p class="card-text">{{ body }}</p>
      {{ extra }}
    </div>
  </div>
{% endmacro %}

{% macro make_tip (date, tips) %}
  <h4> {{ date }} </h4>
  <ul>
    {% for tip in tips %}
      <li> {{ tip }} </li>
    {% endfor %}
  </ul>
{% endmacro %}

{% macro section(title, entries) %}
  <h3> {{ title }} </h3>
  <ul>
    {% for url, name, desc in entries %}
      <li> <a href="{{ url }}">{{ name }}</a>{{ ":" if name != "" else "" }} {{ desc }} </li>
    {% endfor %}
  </ul>
{% endmacro %}

{% macro description(name, years, meetings, year, annual_meetings) %}
  <ul>
    {% if name != None %} <li>Name: {{ name }}</li> {% endif %}
    <li># Years of attending Rubik's Cube Club: {{ years }} </li>
    <li>Total # of meetings attended: {{ meetings }} </li>
    <li># of meetings attended in {{ year }}: {{ annual_meetings }} </li>
  </ul>
{% endmacro %}
